<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Expanding Storage - Linux Systems Administration</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Entry level book on Linux systems administration.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cseanburns/linux_sysadmin" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="expanding-storage"><a class="header" href="#expanding-storage">Expanding Storage</a></h1>
<p>By the end of this section, you will be able to:</p>
<ol>
<li><strong>Understand Virtual Machine Storage Expansion</strong>: Gain practical knowledge
on how to add additional storage to a virtual machine (VM) by creating and
attaching a persistent disk.</li>
<li><strong>Disk Formatting and Mounting</strong>: Learn the process of formatting a non-boot
disk with the <strong>ext4</strong> filesystem and mounting it to a VM for expanded
storage capacity.</li>
<li><strong>Filesystem Configuration</strong>: Develop skills in configuring a VM's
filesystem for automatic mounting using the <code>/etc/fstab</code> file to ensure
persistence across reboots.</li>
<li><strong>Efficient Resource Management</strong>: Understand how to delete unnecessary
disks and manage cloud storage costs, ensuring efficient use of resources.</li>
<li><strong>Command Line Proficiency</strong>: Improve proficiency with essential command
line tools such as <code>mkfs.ext4</code>, <code>mount</code>, <code>umount</code>, <code>chmod</code>, and editing
configuration files with <code>nano</code>.</li>
<li><strong>Storage Pricing Awareness</strong>: Gain insight into the cost considerations of
adding additional storage in cloud environments, with practical examples of
pricing.</li>
</ol>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>I'm sure all or most of you have needed extra disk storage at some point (USB drives, optical disks, floppies???).
Such needs are no different for systems administrators, who often are responsible for managing, monitoring, or storing large amounts of data.</p>
<p>The disk that we created for our VM is small (10 GB), and that's fine for our needs, albeit quite small in many real world scenarios.
To address this, we can add a persistent disk that is much larger.
In this section, we will add a disk to our VM, mount it onto the VM's filesystem, and format it.
Extra storage does incur extra cost.
So at the end of this section, I will show you how to delete the extra disk to avoid that if you want.</p>
<p>We will essentially follow the Google Cloud tutorial to add a non-boot disk to our VM, but with some modification:</p>
<p><a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk">Add a persistent disk to your VM</a></p>
<blockquote>
<p>Note: the main disk used by our VM is the <strong>boot disk</strong>.
The boot disk contains the
software required to boot the system.
All of our computers
(desktops, laptops, tablets, phones, etc.),
regardless of which operating system they run,
have some kind of boot system.</p>
</blockquote>
<h2 id="creating-a-disk"><a class="header" href="#creating-a-disk">Creating a Disk</a></h2>
<p>In the Google Cloud console, first make sure you are working in your course project.
Then navigate to <strong>Compute Engine</strong>, and visit the <strong>Disks</strong> page in the <strong>Storage</strong> section.</p>
<p>Once there, follow these steps:</p>
<ol>
<li>Click on <strong>CREATE DISK</strong>.</li>
<li>Under <strong>Name</strong>, add a preferred name.
<ul>
<li>For example, you can name it <strong>backup1</strong>.</li>
</ul>
</li>
<li>Under <strong>Description</strong>, add text to describe your disk.
<ul>
<li>For example, you can write <strong>Backup</strong>.</li>
</ul>
</li>
<li>Under <strong>Location</strong>, leave or choose <strong>Single zone</strong>.
<ul>
<li>We are not concerned about data safety. If we were, then we would select other options here.</li>
</ul>
</li>
<li>Select the same <strong>Region</strong> and <strong>Zone</strong> as your VM instance.</li>
<li>Under <strong>Source</strong>, select <strong>Blank disk</strong>.</li>
<li>Under <strong>Disk settings</strong>, select <strong>Balanced persistent disk</strong>.</li>
<li>Under <strong>Size</strong>, change this to 10GB.
<ul>
<li>You can actually choose larger sizes, but be aware that <a href="https://cloud.google.com/compute/all-pricing#disk">disk
pricing</a> is $0.10 per GB.</li>
<li>At that cost, 100 GB = $10 / month.</li>
</ul>
</li>
<li>Click on <strong>Enable snapshot schedule</strong>.</li>
<li>Under <strong>Encryption</strong>, make sure <strong>Google-managed encryption key</strong> is
selected.</li>
<li>Click <strong>Create</strong> to create your disk.</li>
</ol>
<h2 id="adding-the-disk-to-our-vm"><a class="header" href="#adding-the-disk-to-our-vm">Adding the Disk to our VM</a></h2>
<p>Now that we have created our disk, we need to <strong>mount</strong> it onto our filesystem so that it's available to our VM.
Conceptually, this process is like inserting a new USB drive into our computer.</p>
<p>To add the new disk to our VM, follow these steps:</p>
<ol>
<li>Visit the <strong>VM instances</strong> page.</li>
<li>Click on the check box next to your virtual machine.
<ul>
<li>That will convert the <strong>Name</strong> of your VM into a hyperlink if it's not already hyperlinked.</li>
</ul>
</li>
<li>Click on the <strong>Name</strong> of your VM.
<ul>
<li>That will take you to the <strong>VM instance details</strong> page.</li>
</ul>
</li>
<li>Click on the <strong>Edit</strong> button at the top of the details page.</li>
<li>Under the <strong>Additional disks</strong> section, click on <strong>+ ATTACH EXISTING DISK</strong>.</li>
<li>A panel will open on the right side of your browser.</li>
<li>Click on the drop down box and select the disk, by name, you created.</li>
<li>Leave the defaults as-is.</li>
<li>Click on the <strong>SAVE</strong> button.</li>
<li>Then click on the <strong>SAVE</strong> button on the details page.</li>
</ol>
<p>If you return to the <strong>Disks</strong> page in the <strong>Storage</strong> section, you will now see that the new disk is in use by our VM.</p>
<h2 id="formatting-and-mounting-a-non-boot-disk"><a class="header" href="#formatting-and-mounting-a-non-boot-disk">Formatting and Mounting a Non-Boot Disk</a></h2>
<h3 id="formatting-our-disk"><a class="header" href="#formatting-our-disk">Formatting Our Disk</a></h3>
<p>In order for our VM to make use of the extra storage, the new drive must be formatted and mounted.
Different operating systems use different filesystem formats.
You may already know that macOS uses the <a href="https://support.apple.com/guide/disk-utility/file-system-formats-dsku19ed921c/mac">Apple File System (APFS)</a> by default and that Windows uses the <a href="https://docs.microsoft.com/en-us/windows-server/storage/file-server/ntfs-overview">New Technology File System (NTFS)</a>.
Linux is no different, but uses different file systems than macOS and Windows.
There are many formatting technologies that we can use in Linux, but we'll use the <a href="https://ext4.wiki.kernel.org/index.php/Main_Page">ext4 (fourth extended filesystem)</a> format.
This is recommended for Google Cloud, and it is also a stable and common one for Linux.</p>
<p>In this section, we will closely follow the steps outlined under the <a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk"><strong>Formatting and mounting a non-boot disk on a Linux VM</strong></a> section.
I replicate those instructions below, but I highly encourage you to read through the instructions on Google Cloud and here:</p>
<ol>
<li>Use the <code>gcloud compute ssh</code> command that you have previously used to connect to your VM.</li>
<li>When you have connected to your VM, run the <code>lsblk</code>
command.
<ul>
<li>Ignore the <strong>loop</strong> devices. (Or <code>grep</code> invert them: <code>lsblk | grep -v "^loop"</code>).</li>
<li>Instead, you should see <strong>sda</strong> and <strong>sdb</strong> under the <strong>NAME</strong> column
outputted by the <code>lsblk</code> command.</li>
<li><strong>sda</strong> represents your main disk.
<ul>
<li><strong>sda1, sda14, sda15</strong> represent the partitions of the <strong>sda</strong> disk (the <strong>sdaN</strong> may be different for you).</li>
<li>Notice the <strong>MOUNTPOINT</strong> for <strong>sda1</strong> is <code>/</code>. This means that <strong>sda1</strong> is mounted at the root level of the filesystem.</li>
<li>Since it's mounted, this means it's in use.</li>
</ul>
</li>
<li><strong>sdb</strong> represents the attached disk we just added.
<ul>
<li>After we format this drive, there will be an <strong>sdb1</strong>, which signifies the drive has been partitioned.</li>
<li>After formatting, we will mount this partition on a different mountpoint.</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>To format our disk for the <strong>ext4</strong> filesystem, we will use the <code>mkfs.ext4</code> (see <code>man mkfs.ext4</code> for details).
The instructions tell us to run the following command (please read the Google Cloud instructions closely;
<strong>it's important to understand these commands as much as possible and not just copy and paste them</strong>):</p>
<pre><code>sudo mkfs.ext4 -m 0 -E lazy_itable_init=0,lazy_journal_init=0,discard /dev/DEVICE_NAME
</code></pre>
<p>But replace <strong>DEVICE_NAME</strong> with the name of our device.
My device's name is <strong>sdb</strong>, which we saw with the output of the <code>lsblk</code> command; therefore, the specific command I run is:</p>
<pre><code>sudo mkfs.ext4 -m 0 -E lazy_itable_init=0,lazy_journal_init=0,discard /dev/sdb
</code></pre>
<h3 id="mounting-our-disk"><a class="header" href="#mounting-our-disk">Mounting Our Disk</a></h3>
<p>Now that our disk has been formatted in <strong>ext4</strong>, I can mount it.</p>
<blockquote>
<p>Note: to <strong>mount</strong> a disk simply means to make the disk's filesystem
available so that we can use it for accessing, storing, etc files on the
disk. Whenever we insert a USB drive, a DVD drive, etc into our computers,
the OS you use should mount that disk automatically so that you can access
and use that disk. Conversely, when we remove those drives, the OS
<strong>unmounts</strong> them. In Linux, the commands for these are <code>mount</code> and
<code>umount</code>. Note that the <code>umount</code> command is not <strong>unmount</strong>.</p>
</blockquote>
<p>You will recall that we have <a href="03-filesystem-file-management.html">discussed filesystems earlier</a> and
that the term is a bit confusing since it refers to both the directory hierarchy and also the formatting type (e.g., ext4).
I discussed how Windows assigns drives letters (<code>A:</code>, <code>B:</code>, etc.) when attaching new drives, like a USB drive.
Unlike Windows, I mentioned that in Linux and Unix (e.g., macOS), when we add an additional disk, its filesystem gets added onto our existing system.
That is, it becomes part of the directory hierarchy and under the <code>/</code> top level part of the hierarchy.
In practice, this means that we have to create the <strong>mountpoint</strong> for our new disk, and we do that first with the <code>mkdir</code> command.
The Google Console documentation instructs us to use the following command:</p>
<pre><code>sudo mkdir -p /mnt/disks/MOUNT_DIR
</code></pre>
<p>And to replace <strong>MOUNT_DIR</strong> with the directory we want to create.
Since my added disk is named <strong>disk-1</strong>, I'll call it that:</p>
<pre><code>sudo mkdir -p /mnt/disks/disk-1
</code></pre>
<p>Now we can <code>mount</code> the disk to that directory. Per the instructions on Google Console, and given that my added drive has the device name <strong>sdb</strong>,
I use the following command:</p>
<pre><code>sudo mount -o discard,defaults /dev/sdb /mnt/disks/disk-1
</code></pre>
<p>We also need to change the modifications, and grant access for additional users:</p>
<pre><code>sudo chmod 777 /mnt/disks/disk-1
</code></pre>
<p>We can test that it exists and is accessible with the <code>lsblk</code> and the <code>cd</code> commands.
The <code>lsblk</code> command should show that <strong>sdb</strong> is mounted at <code>/mnt/disks/disk-1</code>, and we can <code>cd</code> (change directory) to it:</p>
<pre><code>cd /mnt/disks/disk-1
</code></pre>
<h3 id="automounting-our-disk"><a class="header" href="#automounting-our-disk">Automounting Our Disk</a></h3>
<p>Our disk is mounted, but if the computer (VM) gets rebooted, we would have to re-<code>mount</code> the additional drive manually.
In order to avoid this and automount the drive upon reboot, we need to edit the file <code>/etc/fstab</code>.</p>
<blockquote>
<p>Note that the file is named <strong>fstab</strong> and that it's located in the <strong>/etc</strong> directory.
Therefore the full path is <code>/etc/fstab</code></p>
</blockquote>
<p>The <strong>fstab</strong> file is basically a configuration file that provides information to the OS about the filesystems the system can mount.
The standard information <strong>fstab</strong> contains includes the name (or label) of the device being mounted,
the mountpoint (e.g., <code>/mnt/disks/disk-1</code>), the filesystem type (e.g., <strong>ext4</strong>), and various other mount options.
See <code>man fstab</code> for more details.
For devices to mount automatically upon boot, they have to be listed in this file.
That means we need to edit this file.</p>
<p>Again, here we're following the Google Cloud instructions:</p>
<p>Before we edit system configuration files, however, always create a backup.
We'll use the <code>cp</code> command to create a backup of the <strong>fstab</strong> file.</p>
<pre><code>sudo cp /etc/fstab /etc/fstab.backup
</code></pre>
<p>Next we use the <code>blkid</code> command to get the UUID (universally unique identifier) number for our new device.
Since my device is <code>/dev/sdb</code>, I'll use that:</p>
<pre><code>sudo blkid /dev/sdb
</code></pre>
<p>The output should look something like this <strong>BUT NOTE that your UUID value will be DIFFERENT</strong>:</p>
<pre><code>/dev/sdb: UUID="3bc141e2-9e1d-428c-b923-0f9vi99a1123" TYPE="ext4"
</code></pre>
<p>We need to add that value to <code>/etc/fstab</code> plus the standard information that file requires.
The Google Cloud documentation explicitly guides us here.
We can add that directly to our <code>fstab</code> file by redirecting the output of the <code>blkid</code> command to that file.
<strong>NOTE: you have to use two angle brackets in the following command, or else you will erase the contents of that file!!!</strong></p>
<pre><code>sudo su
blkid /dev/sdb &gt;&gt; /etc/fstab
exit
</code></pre>
<blockquote>
<p>Alternatively, we can use <code>nano</code> to make the edit by copying and pasting the UUID at the end.</p>
</blockquote>
<p>And then edit the file with additional mount information at the bottom:</p>
<pre><code>sudo nano /etc/fstab
</code></pre>
<p>And then add the information:</p>
<pre><code>UUID=3bc141e2-9e1d-428c-b923-0f9vi99a1123 /mnt/disks/disk-1 ext4 discard,defaults,nofail 0 2
</code></pre>
<p>Save and exit <code>nano</code>.
And that's it!
If you reboot your VM, or if your VM rebooted for some reason, the extra drive we added should automatically mount upon reboot.
If it doesn't, then it may mean that the drive failed, or that there was an error (i.e., typo) in the configuration.</p>
<p>Let's check if it's automounted upon reboot:</p>
<pre><code>sudo reboot now
</code></pre>
<p>Wait a minute, and log back in to check.
Then run the <code>lsblk</code> command to see if the new drive is recognized and mounted at <code>/mnt/disks/disk-1</code>:</p>
<pre><code>lsblk
</code></pre>
<h3 id="delete-the-disk"><a class="header" href="#delete-the-disk">Delete the Disk</a></h3>
<p>You are welcome to keep the disk attached to the VM.
But if you do not want to incur any charges for it, which would be about $1 / month at 10 GB, then we can delete it.</p>
<p>To delete the disk, first delete the line that we added in <code>/etc/fstab</code>, unmount it, and then delete the disk in the gcloud console.</p>
<p>To unmount the disk, we use the <code>umount</code> command:</p>
<pre><code>sudo umount /mnt/disks/disk-1
</code></pre>
<p>Check if it's unmounted:</p>
<pre><code>lsblk
</code></pre>
<p>Then we need to delete the disk in gcloud.</p>
<ol>
<li>Go to the <strong>VM instances</strong> page.</li>
<li>Click on the check box next to the VM.</li>
<li>Click on the name, which should be a hyperlinked.</li>
<li>This goes to the <strong>VM instances detail</strong> page.</li>
<li>Click on the <strong>Edit</strong> button at the top of the page.</li>
<li>Scroll down to the <strong>Additional disks</strong> section.</li>
<li>Click the edit (looks like a pencil) button.</li>
<li>In the right-hand pane that opens up, select <strong>Delete disk</strong> under the
<strong>Deletion rule</strong> section.</li>
<li>Scroll back to the <strong>Additional disks</strong> section.</li>
<li>Click on the <code>X</code> to detach the disk.</li>
<li>Click on <strong>Save</strong>.</li>
<li>Go the <strong>Disk</strong> section in the left-hand navigation pane.</li>
<li>Check the disk to delete, and then Delete it.
<ul>
<li>Make sure you delete the backup disk and not the main OS disk!</li>
</ul>
</li>
<li>Click on the <strong>Snapshots</strong> section in the left-hand navigation pane (<strong>Compute Engine</strong>, <strong>Storage</strong>, and then <strong>Snapshots</strong>).</li>
<li>If a snapshot has been taken, check the disk snapshot to delete, and then Delete it.</li>
</ol>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>In this section we learned how to expand the storage of our VM by creating a new virtual drive and adding it to our VM.
We also learned how to format the drive in the <strong>ext4</strong> filesystem format, and mount the drive at <code>/mnt/disks/disk-1</code>.
Finally, we learned how to then edit <code>/etc/fstab</code> to automount the drive.</p>
<p>In addition to using the gcloud console, the commands we used in this section include:</p>
<ol>
<li><code>ssh</code>  : to connect to the remote VM</li>
<li><code>sudo</code> : to run commands as the administrator</li>
<li><code>mkfs.ext4</code> : to create an <strong>ext4</strong> filesystem on our new drive</li>
<li><code>mkdir -p</code> : to create multiple directories under <code>/mnt</code></li>
<li><code>mount</code> : to mount manually the new drive</li>
<li><code>umount</code> : to unmount manually the new drive</li>
<li><code>chmod</code> : to change the mountpoint's file permission attributes</li>
<li><code>cd</code> : to change directories</li>
<li><code>cp</code> : to copy a file</li>
<li><code>nano</code> : to use the text editor <code>nano</code> to edit <code>/etc/fstab</code></li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="p5-managing-the-system.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="5b-managing-users-groups.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="p5-managing-the-system.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="5b-managing-users-groups.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
