<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Installing and Configuring MariaDB - Linux Systems Administration</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Entry level book on Linux systems administration.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="p1-linux-sysadmin.html"><strong aria-hidden="true">1.</strong> Linux Systems Administration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1a-history-linux-unix.html"><strong aria-hidden="true">1.1.</strong> History of Unix and Linux</a></li><li class="chapter-item expanded "><a href="1b-what-is-linux.html"><strong aria-hidden="true">1.2.</strong> What is Linux?</a></li><li class="chapter-item expanded "><a href="1c-what-is-sysadmin.html"><strong aria-hidden="true">1.3.</strong> What is Systems Administration?</a></li></ol></li><li class="chapter-item expanded "><a href="p2-project-management.html"><strong aria-hidden="true">2.</strong> Project Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2a-using-gcloud-virtual-machines.html"><strong aria-hidden="true">2.1.</strong> Using gcloud for Virtual Machines</a></li><li class="chapter-item expanded "><a href="2b-using-git-github-for-documentation.html"><strong aria-hidden="true">2.2.</strong> Using Git and GitHub for Documentation</a></li></ol></li><li class="chapter-item expanded "><a href="p3-the-command-line.html"><strong aria-hidden="true">3.</strong> Learning the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3a-the-linux-filesystem.html"><strong aria-hidden="true">3.1.</strong> The Linux Filesystem</a></li><li class="chapter-item expanded "><a href="3b-files-and-directories.html"><strong aria-hidden="true">3.2.</strong> Files and Directories</a></li><li class="chapter-item expanded "><a href="3c-file-perms-owns.html"><strong aria-hidden="true">3.3.</strong> File Permissions and Ownership</a></li><li class="chapter-item expanded "><a href="3d-text-processing-part-1.html"><strong aria-hidden="true">3.4.</strong> Text Processing: Part 1</a></li><li class="chapter-item expanded "><a href="3e-text-processing-part-2.html"><strong aria-hidden="true">3.5.</strong> Text Processing: Part 2</a></li><li class="chapter-item expanded "><a href="3f-review.html"><strong aria-hidden="true">3.6.</strong> Review</a></li></ol></li><li class="chapter-item expanded "><a href="p4-scripting-the-command-line.html"><strong aria-hidden="true">4.</strong> Scripting the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4a-text-editors.html"><strong aria-hidden="true">4.1.</strong> Text Editors</a></li><li class="chapter-item expanded "><a href="4b-regular-expressions.html"><strong aria-hidden="true">4.2.</strong> Regular Expressions</a></li><li class="chapter-item expanded "><a href="4c-bash-scripting.html"><strong aria-hidden="true">4.3.</strong> Bash Scripting</a></li></ol></li><li class="chapter-item expanded "><a href="p5-managing-the-system.html"><strong aria-hidden="true">5.</strong> Managing the System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="5a-expanding-storage.html"><strong aria-hidden="true">5.1.</strong> Expanding Storage</a></li><li class="chapter-item expanded "><a href="5b-managing-users-groups.html"><strong aria-hidden="true">5.2.</strong> Managing Users and Groups</a></li><li class="chapter-item expanded "><a href="5c-managing-software.html"><strong aria-hidden="true">5.3.</strong> Managing Software</a></li><li class="chapter-item expanded "><a href="5d-using-systemd.html"><strong aria-hidden="true">5.4.</strong> Using systemd</a></li></ol></li><li class="chapter-item expanded "><a href="p6-networking-security.html"><strong aria-hidden="true">6.</strong> Networking and Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="6a-networking-tcpip.html"><strong aria-hidden="true">6.1.</strong> Networking and TCP/IP</a></li><li class="chapter-item expanded "><a href="6b-dns-domain-names.html"><strong aria-hidden="true">6.2.</strong> DNS and Domain Names</a></li><li class="chapter-item expanded "><a href="6c-local-security.html"><strong aria-hidden="true">6.3.</strong> Local Security</a></li><li class="chapter-item expanded "><a href="6d-firewall-backups.html"><strong aria-hidden="true">6.4.</strong> Firewalls and Backups</a></li></ol></li><li class="chapter-item expanded "><a href="p7-creating-a-lamp-server.html"><strong aria-hidden="true">7.</strong> Creating a LAMP Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="7a-installing-the-apache-web-server.html"><strong aria-hidden="true">7.1.</strong> Installing the Apache Web Server</a></li><li class="chapter-item expanded "><a href="7b-installing-configuring-php.html"><strong aria-hidden="true">7.2.</strong> Installing and Configuring PHP</a></li><li class="chapter-item expanded "><a href="7c-installing-configuring-mariadb.html" class="active"><strong aria-hidden="true">7.3.</strong> Installing and Configuring MariaDB</a></li><li class="chapter-item expanded "><a href="7d-install-wordpress.html"><strong aria-hidden="true">7.4.</strong> Installing WordPress</a></li><li class="chapter-item expanded "><a href="7e-gcloud-CLI-assignment.html"><strong aria-hidden="true">7.5.</strong> Google Cloud CLI Assignment</a></li></ol></li><li class="chapter-item expanded "><a href="p8-conclusion.html"><strong aria-hidden="true">8.</strong> Conclusion</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cseanburns/linux_sysadmin" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="installing-and-configuring-mariadb"><a class="header" href="#installing-and-configuring-mariadb">Installing and Configuring MariaDB</a></h1>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>We started our LAMP stack when we installed Apache2, and then we added extra functionality when we installed and configured PHP to work with Apache2.
In this section, our objective is to complete the LAMP stack and install and configure <a href="https://en.wikipedia.org/wiki/MariaDB">MariaDB</a>,
a (so-far) compatible fork of the MySQL relational database.</p>
<p>If you need a refresher on relational databases, the MariaDB website can help.
See: <a href="https://mariadb.com/kb/en/introduction-to-relational-databases/">Introduction to Relational Databases</a>.</p>
<p>It's also good to review the documentation for any technology that you use.
MariaDB has <a href="https://mariadb.org/documentation/">good documentation</a> and getting started pages.</p>
<h2 id="install-and-set-up-mariadb"><a class="header" href="#install-and-set-up-mariadb">Install and Set Up MariaDB</a></h2>
<p>In this section, we'll learn how to install, setup, secure, and configure the MariaDB relational database.
The goal it to make it work with the Apache2 web server and the PHP programming language.</p>
<p>First, let's install MariaDB Community Server, and then log into the MariaDB shell under the <strong>MariaDB root</strong> account.</p>
<pre><code>sudo apt install mariadb-server mariadb-client
</code></pre>
<p>This should also start and enable the database server, but we can check if it's running and enabled using the <code>systemctl</code> command:</p>
<pre><code>systemctl status mariadb
</code></pre>
<p>Next we need to run a post installation script called <code>mysql_secure_installation</code> that sets up the MariaDB root password and performs security checks.
To do that, run the following command, and <strong>be sure to save the MariaDB root password you create</strong>:</p>
<pre><code>sudo mysql_secure_installation
</code></pre>
<p>Again, here is where you create a root password for the MariaDB database server.
Be sure to save that and not forget it! When you run the above script, you'll get a series of prompts to respond to like below.
Press <strong>enter</strong> for the first prompt, press <strong>Y</strong> for the prompts marked <strong>Y</strong>, and input your own password.
Since this server is exposed to the internet, be sure to use a complex password.</p>
<pre><code>Enter the current password for root (enter for none):
Set root password: Y
New Password: XXXXXXXXX
Re-enter new password: XXXXXXXXX
Remove anonymous users: Y
Disallow root login remotely: Y
Remove test database and access to it: Y
Reload privilege tables now: Y
</code></pre>
<p>We can login to the database to test it.
In order to do so, we have to become the <strong>root Linux user</strong>, which we can do with the following command:</p>
<pre><code>sudo su
</code></pre>
<blockquote>
<p>Note: we need to generally be careful when we enter commands on the command
line, because it's a largely unforgiving computing environment. But we need
to be especially careful when we are logged in as the Linux root user. This
user can delete anything, including files that the system needs in order to
boot and operate.</p>
</blockquote>
<p>After we are root, we can login to MariaDB, run the <code>show databases;</code> command, and then exit with the <code>\q</code> command:</p>
<pre><code>root@hostname:~# mariadb -u root
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 47
Server version: 10.3.34-MariaDB-0ubuntu0.20.04.1 Ubuntu 20.04

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.002 sec)
</code></pre>
<blockquote>
<p>Note: If we are logging into the root database account as the root Linux user, we don't need to enter our password.</p>
</blockquote>
<h2 id="create-and-set-up-a-regular-user-account"><a class="header" href="#create-and-set-up-a-regular-user-account">Create and Set Up a Regular User Account</a></h2>
<p>We need to reserve the <strong>root MariaDB user</strong> for special use cases.
Instead we create a <strong>regular MariaDB user</strong>.</p>
<p>To create a regular MariaDB user, we use the <code>create</code> command.
In the command below, I create a new user called <strong>webapp</strong>.
I use a complex password that I insert within the single quotes at the end (marked with a series of Xs here for demo purposes):</p>
<pre><code>MariaDB [(none)]&gt; create user 'webapp'@'localhost' identified by 'XXXXXXXXX';
</code></pre>
<p>If the prompt returns a <strong>Query OK</strong> message, then the new user should have been created without any issues.</p>
<h2 id="create-a-practice-database"><a class="header" href="#create-a-practice-database">Create a Practice Database</a></h2>
<p>As the root database user, let's create a new database for a regular, new user.</p>
<p>The regular user will be granted <strong>all privileges</strong> on the new database, including all its tables.
Other than granting <strong>all privileges</strong>, we could limit the user to specific privileges, including:
<strong>CREATE, DROP, DELETE, INSERT, SELECT, UPDATE, and GRANT OPTION</strong>.
Such privileges may be called operations or functions, and they allow MariaDB users to use and modify the databases, where appropriate.
For example, we may want to limit the <strong>webapp</strong> user to only be able to use <strong>SELECT</strong> commands.
It totally depends on the purpose of the database and our security risks.</p>
<pre><code>MariaDB [(none)]&gt; create database linuxdb;
MariaDB [(none)]&gt; grant all privileges on linuxdb.* to 'webapp'@'localhost';
MariaDB [(none)]&gt; show databases;
</code></pre>
<p>Exit out of the MariaDB database as the <strong>root MariaDB user</strong>.
Then exit out of the <strong>root Linux user account</strong>.
You should be back to your normal Linux user account:</p>
<pre><code>MariaDB [(none)]&gt; \q
root@hostname:~# exit
</code></pre>
<blockquote>
<p><strong>Note:</strong> relational database keywords are often written in all capital
letters. As far as I know, this is simply a convention to make the code more
readable. However, in most cases I'll write the keywords in lower case
letters. This is simply because, by convention, I'm super lazy.</p>
</blockquote>
<h2 id="logging-in-as-regular-user-and-creating-tables"><a class="header" href="#logging-in-as-regular-user-and-creating-tables">Logging in as Regular User and Creating Tables</a></h2>
<p>We can start doing MariaDB work.
As a reminder, we've created a new MariaDB user named <strong>webapp</strong> and a new database for <strong>webapp</strong> that is called <strong>linuxdb</strong>.
When we run the <code>show databases</code> command as the <strong>webapp</strong> user, we should see the <strong>linuxdb</strong> database (and only the <strong>linuxdb</strong> database).
Note below that I use the <code>-p</code> option.
This instructs MariaDB to request the password for the <strong>webapp</strong> user, which is required to log in.</p>
<pre><code>mariadb -u webapp -p
MariaDB [(none)]&gt; show databases;
MariaDB [(none)]&gt; use linuxdb;
</code></pre>
<p>A database is not worth much without data.
In the following code, I create and define a new table for our <strong>linuxdb</strong> database.
The table will be called <strong>distributions</strong>, and it will contain data about various Linux distributions.
This includes the name of distribution, distribution developer, and founding date.</p>
<pre><code>MariaDB [(linuxdb)]&gt; create table distributions
    -&gt; (
    -&gt; id int unsigned not null auto_increment,
    -&gt; name varchar(150) not null,
    -&gt; developer varchar(150) not null,
    -&gt; founded date not null,
    -&gt; primary key (id)
    -&gt; );
Query OK, 0 rows affected (0.07 sec)

MariaDB [(linuxdb)]&gt; show tables;
MariaDB [(linuxdb)]&gt; describe distributions;
</code></pre>
<p>Congratulations! Now create some records for that table.</p>
<h3 id="adding-records-into-the-table"><a class="header" href="#adding-records-into-the-table">Adding records into the table</a></h3>
<p>We can populate our <strong>linuxdb</strong> database with some data.
We'll use the <code>insert</code> command to add our records into our <strong>distribution</strong> table:</p>
<pre><code>MariaDB [(linuxdb)]&gt; insert into distributions (name, developer, founded) values
    -&gt; ('Debian', 'The Debian Project', '1993-09-15'),
    -&gt; ('Ubuntu', 'Canonical Ltd.', '2004-10-20'),
    -&gt; ('Fedora', 'Fedora Project', '2003-11-06');
Query OK, 3 rows affected (0.004 sec)
Records: 3  Duplicates: 0  Warnings: 0
MariaDB [(linuxdb)]&gt; select * from distributions;
</code></pre>
<p>Success! Now let's test our table.</p>
<h3 id="testing-commands"><a class="header" href="#testing-commands">Testing Commands</a></h3>
<p>We will complete the following tasks to refresh our MySQL/MariaDB knowledge:</p>
<ul>
<li>retrieve some records or parts of records,</li>
<li>delete a record,</li>
<li>alter the table structure so that it will hold more data, and</li>
<li>add a record:</li>
</ul>
<pre><code>MariaDB [(linuxdb)]&gt; select name from distributions;
MariaDB [(linuxdb)]&gt; select founded from distributions;
MariaDB [(linuxdb)]&gt; select name, developer from distributions;
MariaDB [(linuxdb)]&gt; select name from distributions where name='Debian';
MariaDB [(linuxdb)]&gt; select developer from distributions where name='Ubuntu';
MariaDB [(linuxdb)]&gt; select * from distributions;
MariaDB [(linuxdb)]&gt; alter table distributions
    -&gt; add packagemanager char(3) after name;
MariaDB [(linuxdb)]&gt; describe distributions;
MariaDB [(linuxdb)]&gt; update distributions set packagemanager='APT' where id='1';
MariaDB [(linuxdb)]&gt; update distributions set packagemanager='APT' where id='2';
MariaDB [(linuxdb)]&gt; update distributions set packagemanager='DNF' where id='3';
MariaDB [(linuxdb)]&gt; select * from distributions;
MariaDB [(linuxdb)]&gt; delete from distributions where name='Debian';
MariaDB [(linuxdb)]&gt; insert into distributions
    -&gt; (name, packagemanager, developer, founded) values
    -&gt; ('Debian', 'The Debian Project', '1993-09-15'),
    -&gt; ('CentOS', 'YUM', 'The CentOS Project', '2004-05-14');
MariaDB [(linuxdb)]&gt; select * from distributions;
MariaDB [(linuxdb)]&gt; select name, packagemanager
    -&gt; from distributions
    -&gt; where founded &lt; '2004-01-01';
MariaDB [(linuxdb)]&gt; select name from distributions order by founded;
MariaDB [(linuxdb)]&gt; \q
</code></pre>
<h2 id="install-php-and-mysql-support"><a class="header" href="#install-php-and-mysql-support">Install PHP and MySQL Support</a></h2>
<p>The next goal is to complete the connection between PHP and MariaDB so that we can use both for our websites.</p>
<p>First install PHP support for MariaDB.
We're installing some modules alongside the basic support.
These may or may not be needed, but I'm installing them to demonstrate some basics.</p>
<pre><code>sudo apt install php-mysql
</code></pre>
<p>And then restart Apache2 and MariaDB:</p>
<pre><code>sudo systemctl restart apache2
sudo systemctl restart mariadb
</code></pre>
<h3 id="create-php-scripts"><a class="header" href="#create-php-scripts">Create PHP Scripts</a></h3>
<p>In order for PHP to connect to MariaDB, it needs to authenticate itself.
To do that, we will create a <strong>login.php</strong> file in <strong>/var/www/html</strong>.
We also need to change the group ownership of the file and its permissions.
Since this file contains password information, changing its permissions mean we prevent others from accessing it.</p>
<pre><code>cd /var/www/html/
sudo touch login.php
sudo chmod 640 login.php
sudo chown :www-data login.php
ls -l login.php
sudo nano login.php
</code></pre>
<p>In the file, add the following credentials.
If you used a different database name than <strong>linuxdb</strong> and a different username than <strong>webapp</strong>, then you need to substitute your names below.
You need to use your own password where I have the Xs:</p>
<pre><code>&lt;?php // login.php
$db_hostname = "localhost";
$db_database = "linuxdb";
$db_username = "webapp";
$db_password = "XXXXXXXXX";
?&gt;
</code></pre>
<p>Next we create a new PHP file for our website.
This file will display HTML but will primarily be PHP interacting with our MariaDB <strong>distributions</strong> database.</p>
<p>Create a file titled <strong>distros.php</strong>.</p>
<pre><code>sudo nano distros.php
</code></pre>
<p>Then copy over the following text.
I suggest you transcribe it, especially if you're interested in learning a bit of PHP, but you can simply copy and paste it into the <code>nano</code> buffer:</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;MySQL Server Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;?php

// Load MySQL credentials
require_once 'login.php';

// Establish connection
$conn = mysqli_connect($db_hostname, $db_username, $db_password) or
  die("Unable to connect");

// Open database
mysqli_select_db($conn, $db_database) or
  die("Could not open database '$db_database'");

// QUERY 1
$query1 = "show tables from $db_database";
$result1 = mysqli_query($conn, $query1);

$tblcnt = 0;
while($tbl = mysqli_fetch_array($result1)) {
  $tblcnt++;
}

if (!$tblcnt) {
  echo "&lt;p&gt;There are no tables&lt;/p&gt;\n";
}
else {
  echo "&lt;p&gt;There are $tblcnt tables&lt;/p&gt;\n";
}

// Free result1 set
mysqli_free_result($result1);

// QUERY 2
$query2 = "select name, developer from distributions";
$result2 = mysqli_query($conn, $query2);

$row = mysqli_fetch_array($result2, MYSQLI_NUM);
printf ("%s (%s)\n", $row[0], $row[1]);
echo "&lt;br/&gt;";

$row = mysqli_fetch_array($result2, MYSQLI_ASSOC);
printf ("%s (%s)\n", $row["name"], $row["developer"]);

// Free result2 set
mysqli_free_result($result2);

// Query 3
$query3 = "select * from distributions";
$result3 = mysqli_query($conn, $query3);

while($row = $result3-&gt;fetch_assoc()) {
  echo "&lt;p&gt;Owner " . $row["developer"] . " manages distribution " . $row["name"] . ".&lt;/p&gt;";
}

mysqli_free_result($result3);

$result4 = mysqli_query($conn, $query3);
while($row = $result4-&gt;fetch_assoc()) {
  echo "&lt;p&gt;Distribution " . $row["name"] . " was released on " . $row["founded"] . ".&lt;/p&gt;";
}

// Free result4 set
mysqli_free_result($result4);

/* Close connection */
mysqli_close($conn);

?&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Save the file and exit out of <code>nano</code>.</p>
<h3 id="test-syntax"><a class="header" href="#test-syntax">Test Syntax</a></h3>
<p>After you save the file and exit the text editor, we need to test the PHP syntax.
If there are any errors in our PHP, these commands will show the line numbers that are causing errors or leading up to errors.
Nothing will output if all is well with the first command.
If all is well with the second command, HTML should be outputted:</p>
<pre><code>sudo php -f login.php
sudo php -f distros.php
</code></pre>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Congratulations! If you've reached this far, you have successfully created a LAMP stack.
In the process, you have learned:</p>
<ul>
<li>how to install and set up MariaDB</li>
<li>how to create MariaDB root and regular user accounts</li>
<li>how to create a test database with play data for practicing, and</li>
<li>how to connect this with PHP for display on a webpage.</li>
</ul>
<p>In regular applications of these technologies, there's a lot more involved, but completing the above process is a great start to learning more.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="7b-installing-configuring-php.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="7d-install-wordpress.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="7b-installing-configuring-php.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="7d-install-wordpress.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
