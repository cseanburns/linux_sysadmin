<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>File Attributes - Linux Systems Administration</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Book on entry level Linux systems administration work.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="p1-linux-sysadmin.html"><strong>1.</strong> Linux Systems Administration</a></li><li><ul class="section"><li><a href="01-what-is-linux.html"><strong>1.1.</strong> What is Linux?</a></li><li><a href="02-what-is-sysadmin.html"><strong>1.2.</strong> What is Systems Administration?</a></li><li><a href="03-history-linux-unix.html"><strong>1.3.</strong> History of Unix and Linux</a></li></ul></li><li><a href="p2-the-command-line.html"><strong>2.</strong> Learning the Command Line</a></li><li><ul class="section"><li><a href="04-quick-ssh-connect.html"><strong>2.1.</strong> Connect to a Remote Server</a></li><li><a href="05-the-linux-filesystem.html"><strong>2.2.</strong> The Linux Filesystem</a></li><li><a href="06-files-and-directories.html"><strong>2.3.</strong> Files and Directories</a></li><li><a href="07-file-attributes.html" class="active"><strong>2.4.</strong> File Attributes</a></li><li><a href="08-text-processing-part-1.html"><strong>2.5.</strong> Text Processing, Part 1</a></li><li><a href="09-text-processing-part-2.html"><strong>2.6.</strong> Text Processing, Part 2</a></li><li><a href="10-text-editors.html"><strong>2.7.</strong> Text Editors</a></li><li><a href="11-revisiting-paths.html"><strong>2.8.</strong> Revisiting Paths</a></li><li><a href="12-bash-scripting.html"><strong>2.9.</strong> Bash Scripting</a></li><li><a href="13-regular-expressions.html"><strong>2.10.</strong> Regular Expressions</a></li></ul></li><li><a href="p3-using-gcloud.html"><strong>3.</strong> Using Google Cloud (gcloud)</a></li><li><ul class="section"><li><a href="14-using-gcloud.html"><strong>3.1.</strong> Using gcloud for Virtual Machines</a></li><li><a href="15-expanding-storage.html"><strong>3.2.</strong> Expanding Storage</a></li></ul></li><li><a href="p4-managing-the-system.html"><strong>4.</strong> Managing the System</a></li><li><ul class="section"><li><a href="16-managing-users-groups.html"><strong>4.1.</strong> Managing Users and Groups</a></li><li><a href="17-systemd.html"><strong>4.2.</strong> systemd</a></li><li><a href="18-using-apt.html"><strong>4.3.</strong> Using APT to Manage Software</a></li></ul></li><li><a href="p5-networking-security.html"><strong>5.</strong> Networking and Security</a></li><li><ul class="section"><li><a href="19-tcip-networking.html"><strong>5.1.</strong> TCIP Networking</a></li><li><a href="20-networking-dns-domains.html"><strong>5.2.</strong> DNS and Domain Names</a></li><li><a href="21-security-chroot.html"><strong>5.3.</strong> Security and chroot</a></li><li><a href="22-security-firewall.html"><strong>5.4.</strong> Security and Firewalls</a></li><li><a href="23-backups.html"><strong>5.5.</strong> Backups</a></li></ul></li><li><a href="p6-lamp.html"><strong>6.</strong> Creating a LAMP Server</a></li><li><ul class="section"><li><a href="24-httpd-apache.html"><strong>6.1.</strong> Apache2 Web Server</a></li><li><a href="25-httpd-php.html"><strong>6.2.</strong> Apache2 and PHP</a></li><li><a href="26-httpd-virtualhosts.html"><strong>6.3.</strong> Apache2 and Virtual Hosts</a></li><li><a href="27-httpd-mariadb.html"><strong>6.4.</strong> Apache2 and MariaDB</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="07-file-attributes.html#file-attributes" id="file-attributes"><h1>File Attributes</h1></a>
<a class="header" href="07-file-attributes.html#identifying-ownership-and-permissions" id="identifying-ownership-and-permissions"><h2>Identifying Ownership and Permissions</h2></a>
<p>In the last section, we saw that the output of the <code>ls -l</code> command
included a lot extra information besides a listing of file names.
The output also listed the owners and permissions for each file and directory.</p>
<p>Each user account on a Linux system
(like many operating systems)
has a user name and has at least one group membership, and
that name and that group membership
determine the user and group ownership
for all files created under that account.</p>
<p>In order to allow or restrict access to files and directories
(for example,
to allow other users to read, write to, or run your or others' files),
ownership and permissions are set in order to manage that kind
of access to those files and directories.
There are thus two owners for every file (and directory):</p>
<ul>
<li>user owner</li>
<li>group owner</li>
</ul>
<p>And there are three permission <em>modes</em> that restrict or expand
access to each file (or directory) based on user or group membership:</p>
<ul>
<li>(r)ead</li>
<li>(w)rite</li>
<li>e(x)ecute (as in a program)</li>
</ul>
<blockquote>
<p>I am emphasizing the <strong>rwx</strong> in the above list of modes because
we will need to remember what these letters stand for when
we work with file and directory permissions.</p>
</blockquote>
<p>Consider the output of <code>ls -l</code> in some <strong>public_html</strong> directory
that contains a single file called <strong>index.html</strong>:</p>
<pre><code>-rw-rw-r-- 1 sean sean 11251 Jun 20 14:41 index.html
</code></pre>
<p>According to the above output,
we can parse the following information about the file:</p>
<table><thead><tr><th> Attributes             </th><th> <code>ls -l</code> output   </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>-rw-rw-r--</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> sean               </td></tr>
<tr><td> Group name             </td><td> sean               </td></tr>
<tr><td> Byte size              </td><td> 11251              </td></tr>
<tr><td> Last modification date </td><td> Jun 20 14:41       </td></tr>
<tr><td> File name              </td><td> index.html         </td></tr>
</tbody></table>
<p>What's important for us right now are the <strong>File permissions</strong> row,
the <strong>Owner name</strong> row,
and the <strong>Group name</strong> row.</p>
<p>The Owner and Group names of the <strong>index.html</strong> file are <strong>sean</strong> because
there is a user account named <strong>sean</strong> on the system and
a group account named <strong>sean</strong> on the system, and
that file exists in the user <strong>sean</strong>'s home directory.</p>
<p>The <strong>File permissions</strong> row shows:</p>
<pre><code>-rw-rw-r--
</code></pre>
<p>Let's ignore the first dash for now.
The remaining permissions can be broken down as:</p>
<ul>
<li>rw- (read and write only permissions for the Owner)</li>
<li>rw- (read and write only permissions for the Group)</li>
<li>r-- (read-only permissions for the World)</li>
</ul>
<p>We read the output as such
(dashes, other than the initial one, signify no permissions):</p>
<ul>
<li>User <strong>sean</strong> is the Owner and has (r)ead and (w)rite permissions on the file
but not e(x)ecute permissions (<code>rw-</code>).</li>
<li>Group <strong>sean</strong> is the Group owner and has (r)ead and (w)rite permissions on
the file but not e(x)ecute permissions (<code>rw-</code>).</li>
<li>The <strong>World</strong> can (r)ead the file but cannot (w)rite to the file nor
e(x)ecute the file (<code>r--</code>).</li>
</ul>
<blockquote>
<p>The word <strong>write</strong> is a classical computing term
that means, essentially, to edit and save edits of a file.
Today we use the term <strong>save</strong> instead of <strong>write</strong>,
but remember that they are basically equivalent terms.</p>
</blockquote>
<p>Since this is an HTML page for a website,
the <strong>World</strong> ownership allows people to view (read) the file but not write
(save) to it nor execute (run) it.
Any webpage you view on the internet at least has World mode set to read.</p>
<p>Let's take a look at another file.
In our <code>/bin</code> directory, we can see a listing for this program
(note that I specify the absolute path of the file named <strong>bin</strong>):</p>
<pre><code>ls -l /bin/zip
-rwxr-xr-x 1 root   root    212K Feb  2  2021  zip*
</code></pre>
<table><thead><tr><th> Attributes             </th><th> <code>ls -l</code> output   </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>-rwxr-xr-x</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> root               </td></tr>
<tr><td> Group name             </td><td> root               </td></tr>
<tr><td> Byte size              </td><td> 212K               </td></tr>
<tr><td> Last modification date </td><td> Feb  2 2021        </td></tr>
<tr><td> File name              </td><td> zip*               </td></tr>
</tbody></table>
<p>Since <code>zip</code> is a computer program used to package and compress files,
it needs to be e(x)ecutable.
That is, users on the system need to be able to run it.
But notice that the owner and group names of the file point to the user <strong>root</strong>.
We have already learned that there is a <strong>root</strong> level in our filesystem.
This is the top level directory in our filesystem and is referenced
by the forward slash: <code>/</code>.
But there is also a <strong>root</strong> user account.
This is the system's <strong>superuser</strong>.
The <strong>superuser</strong> can run or access anything on the system, and
this user also owns most of the system files.</p>
<p>We read the output as such:</p>
<ul>
<li>User <strong>root</strong> is the Owner and has (r)ead, (w)rite, and e(x)ecute (<code>rwx</code>) permissions on the file.</li>
<li>Group <strong>root</strong> is the Group owner and has (r)ead and e(x)ecute permissions
but not (w)rite permissions (<code>r-x</code>)</li>
<li>The <strong>World</strong> has (r)ead and e(x)ecute permissions but not (w)rite (<code>r-x</code>). This
permissions allows other users (like you and me) to use the <code>zip</code>
program.</li>
</ul>
<blockquote>
<p>The asterisk at the end of the file name (<code>zip*</code>) simply indicates that
this file is an executable;
i.e., it is a software program that you can run.</p>
</blockquote>
<p>Finally, let's take a look at the permissions for a directory.
On my system, I run the following command in my home directory,
which will show the permissions for my <code>/home/sean</code> directory:</p>
<pre><code>ls -ld
</code></pre>
<p>And the output is:</p>
<pre><code>drwx--x--- 51 sean sean 4.0K Jun 23 18:35 ./
</code></pre>
<p>This shows that:</p>
<table><thead><tr><th> Attributes             </th><th> <code>ls -ld</code> output  </th></tr></thead><tbody>
<tr><td> File permissions       </td><td> <code>drwx--x---</code>     </td></tr>
<tr><td> Number of links        </td><td> 1                  </td></tr>
<tr><td> Owner name             </td><td> sean               </td></tr>
<tr><td> Group name             </td><td> sean               </td></tr>
<tr><td> Byte size              </td><td> 4.0K               </td></tr>
<tr><td> Last modification date </td><td> Jun 23             </td></tr>
<tr><td> File name              </td><td> ./                 </td></tr>
</tbody></table>
<p>This is a little different from the previous examples, but let's parse it:</p>
<ul>
<li>Instead of an initial dash, this <em>file</em> has an initial <strong>d</strong> that identifies this
as a directory. Directories in Linux are simply special types of files.</li>
<li>User <strong>sean</strong> has read, write, and execute (<code>rwx</code>) permissions.</li>
<li>Group <strong>sean</strong> has execute (<code>--x</code>) permissions only.</li>
<li>The <strong>World</strong> has no permissions (<code>---</code>).</li>
<li><strong>./</strong> signifies the current directory, which happens to be my home
directory, since I ran that command at the <code>/home/sean</code> path.</li>
</ul>
<p>The takeaway from this set of permissions and the ownership is that only the
user <strong>sean</strong> and those in the group <strong>sean</strong>, which is just the user <strong>sean</strong>,
can access this home directory.</p>
<p>We might ask why the directory has an e(x)ecutable bit set
for the owner and the group if
a directory is not an executable file.
That is, it's not a program or software.
This is so that the owner and the group can access that directory
using, for example, the <code>cd</code> (change directory) command.
If the directory was not executable,
like it's not for the <strong>World</strong> (<code>---</code>),
then it would not be accessible
with the <code>cd</code> command,
or any other command.
In this case, the <strong>World</strong>
(users who are not me)
cannot access my home directory.</p>
<a class="header" href="07-file-attributes.html#changing-file-permissions-and-ownership" id="changing-file-permissions-and-ownership"><h2>Changing File Permissions and Ownership</h2></a>
<a class="header" href="07-file-attributes.html#changing-file-permissions" id="changing-file-permissions"><h3>Changing File Permissions</h3></a>
<p>All the files and directories on a Linux system
have default ownership and permissions set.
This includes new files that we might create as
we use our systems.
There will be times when we will want to change the defaults,
for example, the kinds of defaults described above.
There are several commands available to do that,
and here I'll introduce you to the two most common ones.</p>
<ol>
<li>The <code>chmod</code> command is used to change file (and directory) permissions
(or file mode bits).</li>
<li>The <code>chown</code> command is used to change a file's (and directory's) owner and
group.</li>
</ol>
<p>The <code>chmod</code> command changes the <code>-rwxrwxrwx</code> part of a file's attributes
that we see with the <code>ls -l</code> command.
Each one of those bits (the <code>r</code>, the <code>w</code>, and the <code>x</code>)
are assigned the following <a href="https://docs.oracle.com/cd/E19504-01/802-5750/6i9g464pv/index.html">octal</a> values:</p>
<table><thead><tr><th> permission   </th><th> description    </th><th> octal value   </th></tr></thead><tbody>
<tr><td> r            </td><td> read           </td><td> 4             </td></tr>
<tr><td> w            </td><td> write          </td><td> 2             </td></tr>
<tr><td> x            </td><td> execute        </td><td> 1             </td></tr>
<tr><td> -            </td><td> no permissions </td><td> 0             </td></tr>
</tbody></table>
<p>There are three octal values for the three set of permissions
represented by <code>-rwxrwxrwx</code>.
If I bracket the sets (for demonstration purposes only),
they look like this:</p>
<pre><code>-[rwx][rwx][rwx]
</code></pre>
<p>The first set describes the permissions for the owner.
The second set describes the permissions for the group.
The third set describes the permissions for the World.</p>
<p>We use the <code>chmod</code> command and the octal values to change
a file or directory's permissions.
For each set, we add up the octal values.
For example, to make a file read (4), write (2), and executable (1)
for the owner only,
and zero out the permissions for the group and World,
we use the <code>chmod</code> command like so:</p>
<pre><code>chmod 700 paper.txt
</code></pre>
<p>We use 7 because <code>4+2+1=7</code>, and
we use two zeroes in the second two places
since we're removing permissions for group and World.</p>
<p>If we want to make the file read, write, and executable by
the owner, the group, and the world, then we repeat this for each set:</p>
<pre><code>chmod 777 paper.txt
</code></pre>
<p>More commonly, we might want to restrict ownership.
Here we enable <code>rw-</code> for the owner,
and <code>r--</code> for the group and the World:</p>
<pre><code>chmod 644 paper.txt
</code></pre>
<p>Because <code>4+2=6</code> for owner,
and <code>4</code> is read only for group and World, respectively.</p>
<a class="header" href="07-file-attributes.html#changing-file-ownership" id="changing-file-ownership"><h3>Changing File Ownership</h3></a>
<p>In order to change the ownership of a file,
we use the <code>chown</code> command followed by
the name of the owner.
We can optionally change the owner of the group by adding a colon (no spaces)
and the name of the group.</p>
<p>We can see what groups we belong to with the <code>groups</code> command.
On one system that I have an account on, I am a member of two groups:
a group <strong>sean</strong> (same as my user name on this system),
and a group <strong>sudo</strong>,
which signifies that I'm an administrator on this system
(more on <code>sudo</code> later in the semester).</p>
<pre><code>groups
sean sudo 
</code></pre>
<p>We can only change the user and group ownership of a file or directory
if we have administrative privileges (<code>sudo</code> administrative access),
or if we share group membership.
This means that,
unless we have <code>sudo</code> (admin) privileges,
we often might change the group name for a file or directory
than the user owner.
Later in the semester,
you will have to do this kind of work (change user and group names)
of files and directories.
In the meantime, let's see some examples:</p>
<p>Imagine that my Linux user account belongs to the group <strong>sisFaculty</strong>, and
that there are other users on the Linux system (my colleagues at work)
who are also members of this group.
If I want to make a directory or file accessible to them,
then I can change the group name of a file I own to <strong>sisFaculty</strong>.
Let's call that file <strong>testFile.txt</strong>.
To change only the group name for the file:</p>
<pre><code>chown :sisFaculty testFile.txt
</code></pre>
<p>I can generally only change the user owner of a file if I have admin
access on a system.
In such a case,
I might have to use the <code>sudo</code> command
(you do not have access to the <code>sudo</code> command
on our shared server,
but you will have it later on your virtual machines).
In this case, I don't need the colon.
To change the owner only,
say from the user <strong>sean</strong> to the user <strong>tmk</strong>:</p>
<pre><code>sudo chown tmk testFile.txt
</code></pre>
<p>To change both user owner and group name,
we simply specify both names
and separate those names by a colon,
where the syntax is <code>chown USER:GROUP testFile.txt</code></p>
<pre><code>sudo chown tmk:sisFaculty testFile.txt
</code></pre>
<p>After using the <code>chown</code> command to change
either the owner or group,
we should double check the file or directory's permissions
using the <code>chmod</code> command.
Here I make it so that the user owner and the group <strong>sisFaculty</strong> has
(r)ead and (w)rite access to the file.
I use <code>sudo</code> because,
as the user <strong>sean</strong>,
I'm changing the file permissions for a file
that I do not own:</p>
<pre><code>sudo chmod 660 testFile.txt
</code></pre>
<a class="header" href="07-file-attributes.html#conclusion" id="conclusion"><h2>Conclusion</h2></a>
<p>In this section, we learned:</p>
<ul>
<li>how to identify file/directory ownership and permissions</li>
<li>and how to change file/directory ownership and permissions.</li>
</ul>
<p>Specifically, we looked at two ways to change the attributes of a file.
This includes changing the ownership of a file
with the <code>chown</code> command, and
setting the read, write, and execute
permissions of a file with the <code>chmod</code>
command.</p>
<p>The commands we used to change these attributes include:</p>
<ul>
<li><code>chmod</code> : for changing file permissions (or file mode bits)</li>
<li><code>chown</code> : for changing file ownership</li>
</ul>
<p>We also used the following commands:</p>
<ul>
<li><code>ls</code>         : list directory contents
<ul>
<li><code>ls -ld</code> : long list directories themselves, not their contents</li>
</ul>
</li>
<li><code>groups</code>     : print the groups a user is in</li>
<li><code>sudo</code>       : execute a command as another user</li>
</ul>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="06-files-and-directories.html" class="mobile-nav-chapters previous" title="Previous chapter">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="08-text-processing-part-1.html" class="mobile-nav-chapters next" title="Next chapter">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="06-files-and-directories.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="08-text-processing-part-1.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        

    </body>
</html>
