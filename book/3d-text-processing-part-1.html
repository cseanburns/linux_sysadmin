<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Text Processing: Part 1 - Linux Systems Administration</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Entry level book on Linux systems administration.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cseanburns/linux_sysadmin" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="text-processing-part-1"><a class="header" href="#text-processing-part-1">Text Processing: Part 1</a></h1>
<p>In this section, we will cover</p>
<ol>
<li><strong>Text processing tools are fundamental</strong>: Learning to process and
manipulate text is a crucial skill for systems administrators, programmers,
and data analysts. Linux provides a variety of tools to examine, manipulate,
and analyze text.</li>
<li><strong>Plain text is foundational</strong>: Programs and data are often stored in plain
text, making it essential to know how to handle text files effectively.</li>
<li><strong>Essential text processing commands</strong>: Commands such as <code>cat</code>, <code>cut</code>,
<code>head</code>, <code>tail</code>, <code>sort</code>, <code>uniq</code>, and <code>wc</code> allow users to view, manipulate,
and analyze text files, even large datasets, with ease.</li>
<li><strong>Power of pipes and redirection</strong>: Using pipes (<code>|</code>) and redirection (<code>&gt;</code>,
<code>&gt;&gt;</code>), you can chain commands together to create more complex workflows for
processing text files.</li>
<li><strong>CSV data manipulation</strong>: This lecture shows how to work with CSV
(comma-separated value) files, demonstrating how to view, sort, and filter
data with tools like <code>cut</code> and <code>uniq</code>.</li>
<li><strong>Practical applications for systems administration</strong>: The lecture
emphasizes that text processing skills are directly applicable to managing
user accounts, security, system configuration, and more in a systems
administration context.</li>
</ol>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>One of the more important sets of tools that Linux (as well Unix-like)
operating systems provide are tools that
<a href="https://tldp.org/LDP/abs/html/textproc.html">aid processing and manipulating text</a>.
The ability to process and manipulate text, programmatically,
is a basic and essential part of many programming languages,
(e.g., Python, JavaScript, etc),
and learning how to process and manipulate text is
an important skill for a variety of jobs including
statistics, data analytics, data science, programming, web programming,
systems administration, and so forth.
In other words,
this functionality of Linux (and Unix-like) operating systems
essentially means that to learn Linux and the tools that it provides
is akin to learning how to program.</p>
<blockquote>
<p>Plain text files are the basic building blocks of programs and data.
Programs are written in plain text editors (Vim, NeoVim, VS Code, etc), and
data is often stored as plain text.
Linux offers many tools to examine, manipulate, process, analyze,
and visualize data in plain text files.</p>
</blockquote>
<p>In this section, we will learn some of the basic
tools to examine plain text (i.e., data).
We will do some programming later in this class, but for us,
the main objective with learning to program
aligns with our work as systems administrators.
That means our text processing and programming goals will serve our interests
in managing users, security, networking, system configuration, and so forth
as Linux system administrators.</p>
<p>In the meantime, the goal of this section is to acquaint ourselves with
some of the tools that can be used to process text.
In this section, we will only cover a handful of text processing
programs or utilities,
but here is a fairly comprehensive list,
and we'll examine some additional ones from this list
later in the semester:</p>
<ul>
<li><code>cat</code>      : concatenate files and print on the standard output</li>
<li><code>cut</code>      : remove sections from each line of files</li>
<li><code>diff</code>     : compare files line by line</li>
<li><code>echo</code>     : display a line of text</li>
<li><code>expand</code>   : convert tabs to spaces</li>
<li><code>find</code>     : search for files in a directory hierarchy</li>
<li><code>fmt</code>      : simple optimal text formatter</li>
<li><code>fold</code>     : wrap each input line to fit in specified width</li>
<li><code>grep</code>     : print lines that match patterns</li>
<li><code>head</code>     : output the first part of files</li>
<li><code>join</code>     : join lines of two files on a common field</li>
<li><code>look</code>     : display lines beginning with a given string</li>
<li><code>nl</code>       : number lines of files</li>
<li><code>paste</code>    : merge lines of files</li>
<li><code>printf</code>   : format and print data</li>
<li><code>shuf</code>     : generate random permutations</li>
<li><code>sort</code>     : sort lines of text files</li>
<li><code>tail</code>     : output the last part of files</li>
<li><code>tr</code>       : translate or delete characters</li>
<li><code>unexpand</code> : convert spaces to tabs</li>
<li><code>uniq</code>     : report or omit repeat lines</li>
<li><code>wc</code>       : print newline, word, and byte counts for each file</li>
</ul>
<p>We will also discuss two types of operators, the pipe and the redirect.
The latter has a version that will write over the contents of a file,
and a version that will append contents to the end of a file:</p>
<ul>
<li><code>|</code> : redirect standard output from command1 to standard input for command2</li>
<li><code>&gt;</code> : redirect to standard output to a file, overwriting</li>
<li><code>&gt;&gt;</code> : redirect to standard output to a file, appending</li>
</ul>
<p>Today I want to cover a few of the above commands for processing data in a file;
specifically:</p>
<ul>
<li><code>cat</code>  : concatenate files and print on the standard output</li>
<li><code>cut</code>  : remove sections from each line of files</li>
<li><code>head</code> : output the first part of files</li>
<li><code>sort</code> : sort lines of text files</li>
<li><code>tail</code> : output the last part of files</li>
<li><code>uniq</code> : report or omit repeat lines</li>
<li><code>wc</code>   : print newline, word, and byte counts for each file</li>
</ul>
<p>Let's look at a toy, sample file that contains structured data as a CSV (comma separated value) file.
You can download the file to your <code>gcloud</code> virtual machine using the following command:</p>
<pre><code>wget https://raw.githubusercontent.com/cseanburns/linux_sysadmin/master/data/operating-systems.csv
</code></pre>
<p>The file contains a list of operating systems (column one), their software license (column two), and the year the OSes were released (column three).
We can use the <code>cat</code> command to view the entire contents of this small file:</p>
<p><strong>Command:</strong></p>
<pre><code>cat operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>It's a small file, but we might want the line and word count of the file.
To acquire that, we can use the <code>wc</code> (word count) command.
By itself, the <code>wc</code> command will print  the number of lines, words, and bytes of a file.
The following output states that the file contains seven lines, 23 words, and 165 bytes:</p>
<p><strong>Command:</strong></p>
<pre><code>wc operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>  7  23 165 operating-systems.csv
</code></pre>
<p>We can use the <code>head</code> command to output the first ten lines of a file.
Since our file is only seven lines long,
we can use the <code>-n</code> option  to change the default number of lines.
In the following example, I print the first three lines of the file:</p>
<p><strong>Command:</strong></p>
<pre><code>head -n3 operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
</code></pre>
<p>Using the <code>cut</code> command, we can select data from file.
In the first example, I want to select column two (or field two), which contains the license information.
Since this is a CSV file, the fields (aka, columns) are separated by commas.
Therefore I use <code>-d</code> option to instruct the <code>cut</code> command to use commas as the separating character.
The <code>-f</code> option tells the <code>cut</code> command to select field two.
Note that a CSV file may use other characters as the separator character, like the Tab character or a colon.
In such cases, it may still be called a CSV file but you might also see <code>.dat</code> files for data files or other variations.</p>
<p><strong>Command:</strong></p>
<pre><code>cut -d"," -f2 operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code> Proprietary
 BSD
 GPL
 Proprietary
 Proprietary
 Proprietary
 Apache
</code></pre>
<p>From there it's trivial to select a different column.
In the next example, I select column three to get the release year:</p>
<p><strong>Command:</strong></p>
<pre><code>cut -d"," -f3 operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code> 2009
 1993
 1991
 2007
 2001
 1993
 2008
</code></pre>
<p>A genius aspect of the Linux (and Unix) commandline is the ability to <strong>pipe</strong> and <strong>redirect</strong> output from one program to another program.
Output can be further directed to a file.
By stringing together multiple programs in this way, we can create small programs that do much more than the simple programs that compose them.</p>
<p>For example, in the following example, I use the pipe operators to send the output of the <code>cut</code> command to the <code>sort</code> command.
This sorts the data in alphabetical or numerical order, depending on the character type (lexical or numerical).
I then pipe that output to the <code>uniq</code> command, which removes duplicate rows.
Finally, I redirect that final output to a new file titled <strong>os-years.csv</strong>.
Since the year <strong>1993</strong> appears twice in the original file, it only appears once in the output because the <code>uniq</code> command removed the duplicate:</p>
<p><strong>Command:</strong></p>
<pre><code>cut -d"," -f3 operating-systems.csv | sort | uniq &gt; os-years.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>cat os-years.csv
 1991
 1993
 2001
 2007
 2008
 2009
</code></pre>
<p>Data files like this often have a header line at the top row that names the data columns.
It's useful to know how to work with such files, so let's add a header row to the top of the file.
In this example, I'll use the <code>sed</code> command, which we will learn more about in the next lesson.
For now, we use <code>sed</code> with the option <code>-i</code> to edit the file, then <code>1i</code> instructs <code>sed</code> to <strong>insert</strong> text at <strong>line 1</strong>.
<code>\OS, License, Year</code> is the text that we want inserted at line 1.
We wrap the argument within single quotes:</p>
<p><strong>Command:</strong></p>
<pre><code>sed -i '1i \OS, License, Year' operating-systems.csv
cat operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>OS, License, Year
Chrome OS, Proprietary, 2009
FreeBSD, BSD, 1993
Linux, GPL, 1991
iOS, Proprietary, 2007
macOS, Proprietary, 2001
Windows NT, Proprietary, 1993
Android, Apache, 2008
</code></pre>
<p>I added the header row just to demonstrate how to remove it when processing files with header rows.
Say we want the license field data, but we need to remove that first line.
In this case, we can use the tail command:</p>
<p><strong>Command:</strong></p>
<pre><code>tail -n +2 operating-systems.csv | cut -d"," -f2 | sort | uniq &gt; license-data.csv
cat license-data.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code> Apache
 BSD
 GPL
 Proprietary
</code></pre>
<blockquote>
<p>The <code>tail</code> command generally outputs the last lines of a file, but the <code>-n +2</code> option is special.
It makes the <code>tail</code> command output a file starting at the second line.
We could specify a different number in order to start output at a different line.
See <code>man tail</code> for more information.</p>
</blockquote>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>In this lesson, we learned how to process and make sense of data held in a text file.
We used some commands that let us select, sort, de-duplicate, redirect, and view data in different ways.
Our data file was a small one, but these are powerful and useful command and operators that would make sense of large data file.</p>
<p>The commands we used in this lesson include:</p>
<ul>
<li><code>cat</code>  : concatenate files and print on the standard output</li>
<li><code>cut</code>  : remove sections from each line of files</li>
<li><code>head</code> : output the first part of files</li>
<li><code>sort</code> : sort lines of text files</li>
<li><code>tail</code> : output the last part of files</li>
<li><code>uniq</code> : report or omit repeat lines</li>
<li><code>wc</code>   : print newline, word, and byte counts for each file</li>
</ul>
<p>We also used two types of operators, the pipe and the redirect:</p>
<ul>
<li><code>|</code> : redirect standard output command1 to standard input of command2</li>
<li><code>&gt;</code> : redirect to standard output to a file, overwriting</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="3c-file-perms-owns.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="3e-text-processing-part-2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="3c-file-perms-owns.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="3e-text-processing-part-2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
