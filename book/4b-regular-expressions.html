<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Regular Expressions - Linux Systems Administration</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Entry level book on Linux systems administration.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="p1-linux-sysadmin.html"><strong aria-hidden="true">1.</strong> Linux Systems Administration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1a-history-linux-unix.html"><strong aria-hidden="true">1.1.</strong> History of Unix and Linux</a></li><li class="chapter-item expanded "><a href="1b-what-is-linux.html"><strong aria-hidden="true">1.2.</strong> What is Linux?</a></li><li class="chapter-item expanded "><a href="1c-what-is-sysadmin.html"><strong aria-hidden="true">1.3.</strong> What is Systems Administration?</a></li></ol></li><li class="chapter-item expanded "><a href="p2-project-management.html"><strong aria-hidden="true">2.</strong> Project Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2a-using-gcloud-virtual-machines.html"><strong aria-hidden="true">2.1.</strong> Using gcloud for Virtual Machines</a></li><li class="chapter-item expanded "><a href="2b-using-git-github-for-documentation.html"><strong aria-hidden="true">2.2.</strong> Using Git and GitHub for Documentation</a></li></ol></li><li class="chapter-item expanded "><a href="p3-the-command-line.html"><strong aria-hidden="true">3.</strong> Learning the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3a-the-linux-filesystem.html"><strong aria-hidden="true">3.1.</strong> The Linux Filesystem</a></li><li class="chapter-item expanded "><a href="3b-files-and-directories.html"><strong aria-hidden="true">3.2.</strong> Files and Directories</a></li><li class="chapter-item expanded "><a href="3c-file-perms-owns.html"><strong aria-hidden="true">3.3.</strong> File Permissions and Ownership</a></li><li class="chapter-item expanded "><a href="3d-text-processing-part-1.html"><strong aria-hidden="true">3.4.</strong> Text Processing: Part 1</a></li><li class="chapter-item expanded "><a href="3e-text-processing-part-2.html"><strong aria-hidden="true">3.5.</strong> Text Processing: Part 2</a></li><li class="chapter-item expanded "><a href="3f-review.html"><strong aria-hidden="true">3.6.</strong> Review</a></li></ol></li><li class="chapter-item expanded "><a href="p4-scripting-the-command-line.html"><strong aria-hidden="true">4.</strong> Scripting the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4a-text-editors.html"><strong aria-hidden="true">4.1.</strong> Text Editors</a></li><li class="chapter-item expanded "><a href="4b-regular-expressions.html" class="active"><strong aria-hidden="true">4.2.</strong> Regular Expressions</a></li><li class="chapter-item expanded "><a href="4c-bash-scripting.html"><strong aria-hidden="true">4.3.</strong> Bash Scripting</a></li></ol></li><li class="chapter-item expanded "><a href="p5-managing-the-system.html"><strong aria-hidden="true">5.</strong> Managing the System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="5a-expanding-storage.html"><strong aria-hidden="true">5.1.</strong> Expanding Storage</a></li><li class="chapter-item expanded "><a href="5b-managing-users-groups.html"><strong aria-hidden="true">5.2.</strong> Managing Users and Groups</a></li><li class="chapter-item expanded "><a href="5c-managing-software.html"><strong aria-hidden="true">5.3.</strong> Managing Software</a></li><li class="chapter-item expanded "><a href="5d-using-systemd.html"><strong aria-hidden="true">5.4.</strong> Using systemd</a></li></ol></li><li class="chapter-item expanded "><a href="p6-networking-security.html"><strong aria-hidden="true">6.</strong> Networking and Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="6a-networking-tcpip.html"><strong aria-hidden="true">6.1.</strong> Networking and TCP/IP</a></li><li class="chapter-item expanded "><a href="6b-dns-domain-names.html"><strong aria-hidden="true">6.2.</strong> DNS and Domain Names</a></li><li class="chapter-item expanded "><a href="6c-local-security.html"><strong aria-hidden="true">6.3.</strong> Local Security</a></li><li class="chapter-item expanded "><a href="6d-firewall-backups.html"><strong aria-hidden="true">6.4.</strong> Firewalls and Backups</a></li></ol></li><li class="chapter-item expanded "><a href="p7-creating-a-lamp-server.html"><strong aria-hidden="true">7.</strong> Creating a LAMP Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="7a-installing-the-apache-web-server.html"><strong aria-hidden="true">7.1.</strong> Installing the Apache Web Server</a></li><li class="chapter-item expanded "><a href="7b-installing-configuring-php.html"><strong aria-hidden="true">7.2.</strong> Installing and Configuring PHP</a></li><li class="chapter-item expanded "><a href="7c-installing-configuring-mariadb.html"><strong aria-hidden="true">7.3.</strong> Installing and Configuring MariaDB</a></li><li class="chapter-item expanded "><a href="7d-install-wordpress.html"><strong aria-hidden="true">7.4.</strong> Installing WordPress</a></li></ol></li><li class="chapter-item expanded "><a href="p8-conclusion.html"><strong aria-hidden="true">8.</strong> Conclusion</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Systems Administration</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cseanburns/linux_sysadmin" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="regular-expressions-with-grep"><a class="header" href="#regular-expressions-with-grep">Regular Expressions with <code>grep</code></a></h1>
<p>By the end of this section, you will:</p>
<ol>
<li><strong>Understand the purpose of <code>grep</code></strong>: Recognize the versatility of <code>grep</code>
for searching through text and its use in filtering output, searching for
patterns in files, and extracting relevant data.</li>
<li><strong>Perform basic searches using <code>grep</code></strong>: Search for multiword strings and
whole words while understanding how to handle case sensitivity and word
boundaries.</li>
<li><strong>Utilize regular expressions</strong>: Apply regular expressions with <code>grep</code> to
search for more complex text patterns, using features like bracket
expressions, character classes, and anchoring.</li>
<li><strong>Leverage repetition and OR operators</strong>: Use repetition operators (e.g.,
<code>*</code>, <code>+</code>) and Boolean OR searches to find repetitive patterns or multiple
possible matches in your text.</li>
<li><strong>Compare outputs with process substitution</strong>: Understand how to compare the
output of multiple <code>grep</code> commands using process substitution techniques
with the <code>diff</code> command.</li>
<li><strong>Understand broader applications</strong>: Gain a foundational understanding of
regular expressions that apply across multiple programming languages and
tools beyond just <code>grep</code>.</li>
</ol>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>The <code>grep</code> command is a powerful tool used in the Linux command line for searching through text.
It scans files or input for lines that match a specified pattern, which can be a simple word or a more complex <strong>regular expression</strong>.
<code>grep</code> is often used to filter output, search for specific data in logs, or find occurrences of certain text patterns within files.
Its versatility makes it an essential tool for efficiently locating information in large sets of data or documents.</p>
<p>In this section, we learn how to use <code>grep</code> to search files.
We will use simple search strings with <code>grep</code> to search for regular words.
But we will use <strong>regular expressions</strong> to search for more complex patterns.</p>
<h3 id="download-data-file"><a class="header" href="#download-data-file">Download Data File</a></h3>
<p>To follow along in this tutorial, download the following file to your home directory on your Google Cloud VM:</p>
<pre><code>wget https://raw.githubusercontent.com/cseanburns/linux_sysadmin/refs/heads/master/data/cities.md
</code></pre>
<h2 id="multiword-strings"><a class="header" href="#multiword-strings">Multiword strings</a></h2>
<p>It's good habit to include search strings within quotes, but this is especially important if we would search for multiword strings.
In these cases, we must enclose them in quotes.</p>
<p><strong>Command:</strong></p>
<pre><code>cat cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| City              | 2020 Census | Founded |
|-------------------|-------------|---------|
| New York City, NY | 8804190     | 1624    |
| Los Angeles, CA   | 3898747     | 1781    |
| Chicago, IL       | 2746388     | 1780    |
| Houston, TX       | 2304580     | 1837    |
| Phoenix, AZ       | 1624569     | 1881    |
| Philadelphia, PA  | 1576251     | 1701    |
| San Antonio, TX   | 1451853     | 1718    |
| San Diego, CA     | 1381611     | 1769    |
| Dallas, TX        | 1288457     | 1856    |
| San Jose, CA      | 983489      | 1777    |
</code></pre>
<p><strong>Command:</strong></p>
<pre><code>grep "San Antonio" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Antonio, TX | 1451853 | 1718 |
</code></pre>
<h2 id="whole-words-case-sensitive-by-default"><a class="header" href="#whole-words-case-sensitive-by-default">Whole words, case sensitive by default</a></h2>
<p>As a reminder, <code>grep</code> commands are case-sensitive by default.
Thus, note that the contents of <strong>cities.md</strong> are all in lowercase.
If I run the above command without the city named capitalized, then <code>grep</code> will return nothing:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "san antonio" cities.md
</code></pre>
<p>To tell grep to ignore case, I need to use the <code>-i</code> option.
We also want to make sure that we enclose our entire search string withing double quotes.</p>
<p>This is a reminder for you to run <code>man grep</code> and to read through the documentation and see what the various options exit for this command.</p>
<p><strong>Command:</strong></p>
<pre><code>grep -i "san antonio" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Antonio, TX | 1451853 | 1718 |
</code></pre>
<h3 id="whole-words-by-the-edges"><a class="header" href="#whole-words-by-the-edges">Whole words by the edges</a></h3>
<p>To search whole words, we can use special characters to match strings at the start and/or the end of words.
For example, note the output if I search for cities in California in my file by searching for the string <strong>ca</strong>.
Since this string appears in Chi<strong>ca</strong>go, then that city matches my grep search:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -i "ca" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| Los Angeles, CA | 3898747 | 1781 |
| Chicago, IL     | 2746388 | 1780 |
| San Diego, CA   | 1381611 | 1769 |
| San Jose, CA    | 983489  | 1777 |
</code></pre>
<p>To limit results to only <strong>CA</strong>, we can enclose our search in special characters that tell <code>grep</code> to limit by whole words only:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -i "\bca\b" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| Los Angeles, CA | 3898747 | 1781 |
| San Diego, CA   | 1381611 | 1769 |
| San Jose, CA    | 983489  | 1777 |
</code></pre>
<blockquote>
<p><strong>Note:</strong> in some cases you might need an extra backslash: <code>grep -i "\\bca\\b" cities.md</code>.</p>
</blockquote>
<p>We can reverse that output and look for strings within other words.
Here is an example of searching for the string <strong>ca</strong> within words:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -i "\Bca\B" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| Chicago, IL | 2746388 | 1780 |
</code></pre>
<h2 id="bracket-expressions-and-character-classes"><a class="header" href="#bracket-expressions-and-character-classes">Bracket Expressions and Character Classes</a></h2>
<p>In conjunction with the <code>grep</code> command, we can also use regular expressions to search for more general patterns in text files.
For example, we can use <strong>bracket expressions</strong> and <strong>character classes</strong> to search for patterns in the text.
Here again using <code>man grep</code> is very important because it includes instructions on how to use these regular expressions.</p>
<h3 id="bracket-expressions"><a class="header" href="#bracket-expressions">Bracket expressions</a></h3>
<p>From <code>man grep</code> on <strong>bracket expressions</strong>:</p>
<blockquote>
<p>A bracket expression is a list of characters enclosed by [ and ]. It matches
any single character in that list. If the first character of the list is the
caret ^ then it matches any character not in the list. For example, the
regular expression [0123456789] matches any single digit.</p>
</blockquote>
<p>The regular expression [^0123456789] matches the inverse.</p>
<blockquote>
<p>Within a bracket expression, a range expression consists of two characters
separated by a hyphen. It matches any single character that sorts between the
two characters.</p>
</blockquote>
<p>To see how this works, let's search the <strong>cities.md</strong> file for letters matching <strong>A, B, or C</strong>.
Specifically, in the following command I use a hyphen to match any characters <strong>in</strong> the range A, B, C.
The output does not include the cities <strong>Houston</strong> or <strong>Dallas</strong> since neither of those lines contain capital <strong>A, B, or C</strong> characters:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "[A-C]" cities.md 
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| City              | 2020 Census | Founded |
| New York City, NY | 8804190     | 1624    |
| Los Angeles, CA   | 3898747     | 1781    |
| Chicago, IL       | 2746388     | 1780    |
| Phoenix, AZ       | 1624569     | 1881    |
| Philadelphia, PA  | 1576251     | 1701    |
| San Antonio, TX   | 1451853     | 1718    |
| San Diego, CA     | 1381611     | 1769    |
| San Jose, CA      | 983489      | 1777    |
</code></pre>
<blockquote>
<p><strong>Note:</strong> Use <code>grep -i "[A-C]" cities.md</code> for a case insensitive search.</p>
</blockquote>
<h3 id="bracket-expressions-inverse-searches"><a class="header" href="#bracket-expressions-inverse-searches">Bracket expressions, inverse searches</a></h3>
<p>When placed after the first bracket, the carat key acts as a Boolean NOT.
The following command matches any characters <strong>not in</strong> the range A,B,C:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "[^A-C]" cities.md
</code></pre>
<p>The output matches all lines since there are no instances of <strong>A, B, and C</strong> in all lines:</p>
<p><strong>Output:</strong></p>
<pre><code>| City              | 2020 Census | Founded |
|-------------------|-------------|---------|
| New York City, NY | 8804190     | 1624    |
| Los Angeles, CA   | 3898747     | 1781    |
| Chicago, IL       | 2746388     | 1780    |
| Houston, TX       | 2304580     | 1837    |
| Phoenix, AZ       | 1624569     | 1881    |
| Philadelphia, PA  | 1576251     | 1701    |
| San Antonio, TX   | 1451853     | 1718    |
| San Diego, CA     | 1381611     | 1769    |
| Dallas, TX        | 1288457     | 1856    |
| San Jose, CA      | 983489      | 1777    |
</code></pre>
<h4 id="process-substitution"><a class="header" href="#process-substitution">Process substitution</a></h4>
<p>Process substitution allows you to use the output of a command as if it were a file.
This is particularly useful when you want to compare the outputs of two commands directly, without having to save them to temporary files.</p>
<p>For example, we can confirm that output from one command does not include Houston or Dallas in a second command by comparing the outputs.
Specifically, we compare the outputs of two or more commands using <strong>process substitution</strong>.
This works because the <strong>process substitution</strong> creates temporary files from the outputs.</p>
<p><strong>Command:</strong></p>
<pre><code>diff &lt;(grep "[A-C]" cities.md) &lt;(grep "[^A-C]" cities.md)
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>1a2
&gt; |-----------------|-------------|------|
4a6
&gt; | Houston, TX     | 2304580     | 1837 |
8a11
&gt; Dallas, TX        | 1288457     | 1856
</code></pre>
<hr />
<h5 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h5>
<ul>
<li><code>&lt;(command)</code> creates a temporary file (or file-like stream) that holds the output of command.</li>
<li><code>diff</code> can then read from these streams as if they were regular files, comparing their contents without needing you to manually save and load files.
The output of the <code>diff</code> command is nicely explained in this <a href="https://unix.stackexchange.com/a/216131">Stack Overflow</a> answer.</li>
</ul>
<p>Without process substitution, you would need to save the outputs of both grep commands to temporary files and then compare them:</p>
<pre><code>grep "[A-C]" cities.md &gt; output1.txt
grep "[^A-C]" cities.md &gt; output2.txt
diff output1.txt output2.txt
</code></pre>
<p>This alternative works but is more cumbersome, as it requires managing temporary files.
Process substitution simplifies the process by handling this behind the scenes.</p>
<hr />
<p>Try this command for an alternate output:</p>
<pre><code>diff -y &lt;(grep "[A-C]" cities.md) &lt;(grep "[^A-C]" cities.md)
</code></pre>
<p>Our ranges may be alphabetical or numerical.
The following command matches any numbers <strong>in</strong> the range 1,2,3:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "[1-3]" cities.md
</code></pre>
<p>Since all single digits appear in the file, the above command returns all lines.
To invert the search, we can use the following grep command.
This will match all non-integers:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "[^0-9]" cities.md
</code></pre>
<h3 id="bracket-expressions-carat-preceding-the-bracket"><a class="header" href="#bracket-expressions-carat-preceding-the-bracket">Bracket expressions, carat preceding the bracket</a></h3>
<p>We saw in a previous section that the carat <code>^</code> key indicates the start of line.
However, we learned above that it can be used to return the inverse of a string in special circumstances.
To use the carat to signify the start of a line, the carat key must precede the opening bracket.
For example, the following command matches any lines that start with the upper case letters within the range of <strong>N,O,P</strong>:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "^| [N-P]" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>New York City, NY | 8804190 | 1624
Phoenix, AZ       | 1624569 | 1881
Philadelphia, PA  | 1576251 | 1701
</code></pre>
<p>And we can reverse that with the following command, which returns all lines that <strong>do not</strong> start with <strong>N,O, or P</strong>:</p>
<p><strong>Command:</strong></p>
<pre><code>grep "^| [^N-P]" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| City            | 2020 Census | Founded |
| Los Angeles, CA | 3898747     | 1781    |
| Chicago, IL     | 2746388     | 1780    |
| Houston, TX     | 2304580     | 1837    |
| San Antonio, TX | 1451853     | 1718    |
| San Diego, CA   | 1381611     | 1769    |
| Dallas, TX      | 1288457     | 1856    |
| San Jose, CA    | 983489      | 1777    |
</code></pre>
<h3 id="character-classes"><a class="header" href="#character-classes">Character classes</a></h3>
<p>Character classes are special types of predefined bracket expressions.
They make it easy to search for general patterns.
From <code>man grep</code> on <strong>character classes</strong>:</p>
<blockquote>
<p>Finally, certain named classes of characters are predefined within bracket
expressions, as follows. Their names are self explanatory, and they are
[:alnum:], [:alpha:], [:blank:], [:cntrl:], [:digit:], [:graph:], [:lower:],
[:print:], [:punct:], [:space:], [:upper:], and [:xdigit:]. For example,
[[:alnum:]] means the character class of numbers and letters ...</p>
</blockquote>
<p>Below I use the <code>awk</code> command to select the fourth column (or field) using the pipe as the field delimiter.
I pipe the output to <code>grep</code> to select lines containing a vertical bar and four digit numbers <code>[[:digit:]]{4}</code> from the results of the <code>awk</code> command:</p>
<p><strong>Command:</strong></p>
<pre><code>awk -F"|" '{ print $4 }' cities.md | grep -Eo "[[:digit:]]{4}"
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>1624
1781
1780
1837
1881
1701
1718
1769
1856
1777
</code></pre>
<blockquote>
<p>I first tested that the <code>awk</code> command selects the appropriate field by running it by itself: <code>awk -F"|" '{ print $4 }' cities.md</code>.</p>
</blockquote>
<h2 id="anchoring"><a class="header" href="#anchoring">Anchoring</a></h2>
<p>As seen above, outside of bracket expressions and character classes, we use the caret <code>^</code> to mark the beginning of a line.
We can also use the <code>$</code> to match the end of a line.
Using either (or both) is called <strong>anchoring</strong>.
Anchoring works in many places.
For example, to search all lines that start with capital <strong>D through L</strong></p>
<p><strong>Command:</strong></p>
<pre><code>grep "^| [D-L]" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| Los Angeles, CA | 3898747 | 1781 |
| Houston, TX     | 2304580 | 1837 |
| Dallas, TX      | 1288457 | 1856 |
</code></pre>
<p>To show how to anchor the end of a line, let's look at the <strong>operating-systems.csv</strong> file.</p>
<p><strong>Command:</strong></p>
<pre><code>grep "1993$" operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>FreeBSD, BSD, 1993
Windows NT, Proprietary, 1993
</code></pre>
<p>We can use both anchors in our <code>grep</code> commands.
The following searches for any lines starting with capital letters that range from C through F.
Then any lines ending with the numbers starting from 3 through 6.
The single dot stands for any character, and the asterisk stands for "the preceding character will zero or more times" (<code>man grep</code>).</p>
<p><strong>Command:</strong></p>
<pre><code>grep "^[C-F].*[3-6]$" operating-systems.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>CP/M, Proprietary, 1974
FreeBSD, BSD, 1993
</code></pre>
<h2 id="repetition"><a class="header" href="#repetition">Repetition</a></h2>
<p>If we want to use regular expressions to identify repetitive patterns, then we can use repetition operators.
As we saw above, the most useful one is the <code>*</code> asterisk.
But there are other options:</p>
<p>In come cases, we need to add the -E option
to extend <code>grep</code>'s regular expression functionality:</p>
<p>Here, the preceding item <strong>S</strong> is matched one or more times:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -E "S+" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Antonio, TX | 1451853 | 1718 |
| San Diego, CA   | 1381611 | 1769 |
| San Jose, CA    | 983489  | 1777 |
</code></pre>
<p>In the next search, the preceding item <strong>l</strong> is matched exactly 2 times:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -E "l{2}" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| Dallas, TX | 1288457 | 1856 |
</code></pre>
<p>Finally, in this example, the preceding item <strong>7</strong> is matched at least two times or at most three times:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -E "7{2,3}" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Jose, CA | 983489 | 1777 |
</code></pre>
<h2 id="or-searches"><a class="header" href="#or-searches">OR searches</a></h2>
<p>We can use the vertical bar <code>|</code> to do a Boolean OR search.
In a Boolean OR statement, the statement is True if either one part is true, the other part is true, or both are true.
In a search statement, this means that at least one part of the search is true.</p>
<p>The following will return lines for each city because they both appear in the file:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -E "San Antonio|Dallas" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Antonio, TX | 1451853 | 1718 |
| Dallas, TX      | 1288457 | 1856 |
</code></pre>
<p>The following will match San Antonio even though Lexington does not appear in the file:</p>
<p><strong>Command:</strong></p>
<pre><code>grep -E "San Antonio|Lexington" cities.md
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>| San Antonio, TX | 1451853 | 1718 |
</code></pre>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>We covered a lot in this section on <code>grep</code> and regular expressions.</p>
<p>We specifically covered:</p>
<ul>
<li>multiword strings</li>
<li>whole word searches and case sensitivity</li>
<li>bracket expressions and character classes</li>
<li>anchoring</li>
<li>repetition</li>
<li>Boolean OR searches</li>
</ul>
<p>Even though we focused on <code>grep</code>, many these regular expressions work across many programming languages.</p>
<p>See <a href="https://www.regular-expressions.info/">Regular-Expression.info</a> for more in-depth lessons on regular expressions.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="4a-text-editors.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="4c-bash-scripting.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="4a-text-editors.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="4c-bash-scripting.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
